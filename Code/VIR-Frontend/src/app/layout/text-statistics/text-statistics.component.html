<!--if it sees the object it will show the result, else it prompt the user to go back-->
<div *ngIf="text;  else elseBlock">
	<div class="row">
		<div class="col-6">
			<h1>Text Statistics</h1>
		</div>

		<div class="col-6">
			<div class="float-right">
				<button type="button" class="btn btn-warning" (click)="backClicked()">
					<i class="fa fa-step-backward" aria-hidden="true"></i>{{backLabel}}</button>
				<button type="button" class="btn btn-success" [routerLink]="['/enhanced-text-result']">
					<i class="fa fa-file-text" aria-hidden="true"></i> {{enhanceTextLabel}} </button>

			</div>
		</div>
	</div>
	<hr>
	<div *ngIf="showDiv">

		<!--Readibility Score-->
		<div class="card" style="margin: auto; margin-bottom: 3%; margin-top: 3%;">
			<h3 class="card-header">Readability Scores</h3>
			<div class="card-block">
				<div [ngSwitch]="true"  style=" margin-bottom: 2%">
					<div *ngSwitchCase="text.fleschReadingScore < 30">
						<ngb-progressbar type="danger" [value]="text.fleschReadingScore" [striped]="true" [animated]="true">
							<i>
								<strong>{{text.fleschReadingScore | number:'1.0-2'}} / 100</strong>
							</i>
						</ngb-progressbar>

					</div>
					<div *ngSwitchCase="text.fleschReadingScore > 60">
						<ngb-progressbar type="success" [value]="text.fleschReadingScore" [striped]="true" [animated]="true">
							<i>
								<strong>{{text.fleschReadingScore | number:'1.0-2'}} / 100</strong>
							</i>
						</ngb-progressbar>
					</div>
					<div *ngSwitchDefault>
						<ngb-progressbar type="warning" [value]="text.fleschReadingScore" [striped]="true" [animated]="true">
							<i>
								<strong>{{text.fleschReadingScore | number:'1.0-2'}} / 100</strong>
							</i>
						</ngb-progressbar>
					</div>
				</div>


				<p>
					<Strong>Total Readibility Level: </Strong>
					<strong style="font-size: 20px; font-weight: bold;">{{text.fleschReadingScore | number:'1.0-2'}}</strong>
				</p>
				<p>
					<Strong>The text is appropriate for: </Strong> {{textLVL}}</p>

			</div>
		</div>

		<!--Text Statistic-->
		<div class="card">
			<h3 class="card-header">Statistics</h3>
			<div class="card-block">
				<table class="table table-bordered" style="margin-bottom: 3%;" >
					<thead class="thead-default">
						<tr>
							<th>#</th>
							<th>Word Count</th>
							<th>Percentage</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th scope="row">AWL</th>
							<td>{{text.statistics.wordCount.awl}}</td>
							<td>{{(text.statistics.wordPercentage.aws * 100) | number:'1.0-2'}}%</td>
						</tr>
						<tr>
							<th scope="row">High Freq.</th>
							<td>{{text.statistics.wordCount.hi}}</td>
							<td>{{(text.statistics.wordPercentage.hi * 100) | number:'1.0-2'}}%</td>
						</tr>
						<tr>
							<th scope="row">Medium Freq.</th>
							<td>{{text.statistics.wordCount.med}}</td>
							<td>{{(text.statistics.wordPercentage.med * 100) | number:'1.0-2'}}%</td>
						</tr>
						<tr>
							<th scope="row">Low Freq.</th>
							<td>{{text.statistics.wordCount.low}}</td>
							<td>{{(text.statistics.wordPercentage.low * 100) | number:'1.0-2'}}%</td>
						</tr>
						<tr>
							<th scope="row">No Category</th>
							<td>{{text.statistics.wordCount.noCategory}}</td>
							<td>{{(text.statistics.wordPercentage.noCategory * 100) | number:'1.0-2'}}%</td>
						</tr>
					</tbody>
				</table>

				<table class="table table-bordered">
					<thead class="thead-default">
						<tr>
							<th>#</th>
							<th>Words</th>
							<th>Sentences</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th scope="row">Total</th>
							<td>{{text.statistics.wordCount.total}}</td>
							<td>{{text.sentenceCount}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<!--Pie Chart-->
		<div class="card" style="margin: auto; margin-bottom: 3%; margin-top: 3%;" data-ng-init="updatePieChart(text.statistics.wordCount.awl, text.statistics.wordCount.hi, text.statistics.wordCount.med, text.statistics.wordCount.low, text.statistics.wordCount.noCategory)">
			<h3 class="card-header bg-success">Pie Chart</h3>
			<div class="card-block">
				<div style="display: block">
					<canvas baseChart [data]="pieChartData" [labels]="pieChartLabels" [chartType]="pieChartType" (chartHover)="chartHovered($event)"
					 (chartClick)="chartClicked($event)"></canvas>
				</div>

			</div>
		</div>

	</div>

</div>


<!--if page refreshes it promt the user to go to the previous page-->
<ng-template #elseBlock>
	<div class="row">
		<div class="col-6">
			<h1>Oops!</h1>
		</div>
		<div class="col-6">
			<div class="float-right">
				<button type="button" class="btn btn-warning" (click)="backClicked()">
					<i class="fa fa-step-backward" aria-hidden="true"></i> Back</button>
			</div>
		</div>
	</div>
	<hr>

	<div>
		<h4> Please go back</h4>
	</div>

</ng-template>